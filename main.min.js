"use strict";
!function(e,r){

	function t(e,r){
		var t={};
		return e.forEach(function(e){
			t[e]=r
		}),t
	}

	function o(){
			if(this.trigger)return!1;
			var t=this,o={},
					i=this.element.serializeArray();
		i.forEach(function(e){
			var r=o[e.name];
			"undefined"==typeof r?/[0-9]/.test(e.name)?o[e.name]=[e.value]:o[e.name]=e.value:/[0-9]/.test(e.name)&&("string"==typeof o[e.name]?r=[r,e.value]:r.push(e.value))
		}),
		e.ajax({
				type:this.element[0].getAttribute("method"),
				url:this.element[0].getAttribute("action"),
				data:o,beforeSend:function(){
					t.trigger=!0
				},
				success:function(){
						l.addClass("modal--success"),n.tab("show"),setTimeout(function(){
							l.removeClass("modal--success"),a.modal("hide"),s.tab("show")
						},5e3)
					},
					error:function(e){
							try{
								var t=JSON.parse(e.responseText),o="Error";
			t.errors.message?o+="\n"+t.errors.message:Object.keys(t.errors).forEach(function(e){
				o+="\n"+t.errors[e].message
			}),r.alert(o)
		}catch(a){
				r.alert("Error, please try again")
			}
		},complete:function(){
					t.trigger=!1,t.element[0].reset(),t.validate.resetForm(),t.element.find(".form-group--error").removeClass("form-group--error"),t.element.find(".error").removeClass("error"),l.removeClass("modal--success")
				}
			})
	}

	var a=e("#contactFormModal"),
		s=e("#mainStateButton"),
		n=e("#successStateButton"),
		i=e("#button-collapsed"),
		c=e("#nav-link"),
		l=e("body"),
		u={
			fio:{
				required:!0,
				minlength:2
			},
			mail:{
				required:!0,
				email:!0
			},
			text:{
				required:!0,
				minlength:2
			},
			phoneContact:{
				required:!0,
				digits :!0
			}
		},
		m={
			forms:[
				{
					element:e("#newProjectForm"),
					trigger:!1,
					rules:Object.assign({},u,t(["A0","A1","A2","A3","A4"],"required"))
				},
				{
					element:e("#improveExistingProjectForm"),
					trigger:!1,
					rules:Object.assign({},u,t(["A0","A1","A2"],"required"))
				},
				{
					element:e("#contactYouForm"),
					trigger:!1,
					rules:u
					}
			]
		};

	e.validator.addMethod("numberAndPlus",
		function(e,r){
			return this.optional(r)||/^\+?[0-9]{3}-?[0-9]{6,12}$/.test(e)
		},
		"Enter valid phone number"
	),

	m.forms.forEach(function(r) {
		r.validate=r.element.validate({
			rules: r.rules,
			submitHandler: o.bind(r),
			errorElement: "div",
			highlight: function(r,t,o) {
				var a=e(r),
						s=a.attr("type");
				a.addClass(t).removeClass(o),
				"checkbox"!==s && "radio"!==s && e(r).parents(".form-group").addClass("form-group--error")
			},
			unhighlight: function(r,t,o){
				var a=e(r),
						s=a.attr("type");
				a.removeClass(t).addClass(o),
				"checkbox"!==s&&"radio"!==s&&e(r).parents(".form-group").removeClass("form-group--error")
			},
			errorPlacement: function(e,r) {
				var t=r.attr("type"),
						o=r.parents(".form-group").find(".form-group-header");
				"checkbox"!==t&&"radio"!==t||e.insertAfter(o).addClass("form-label form-label--error")
			}
		})
	}),

	a.on("show.bs.modal", function() {
		setTimeout(function(){
			l.removeClass("nav--fixed, nav--collapsed")
		}, 1e3),
		s.tab("show")
	}),
      
	i.on("click", function() {
		l.toggleClass("nav--collapsed")
	}),

	a.on("hide.bs.modal", function() {
		l.addClass("modal-hidding"), 
		setTimeout(function(){
			l.removeClass("modal-hidding")
		}, 1e3)
	}),

	r.location.hash && "#contact"===r.location.hash?(a.modal("show"), setTimeout(function() {
					l.addClass("idap-site-ready")
	}, 1e3)):l.addClass("idap-site-ready")

}(jQuery, window);

//# sourceMappingURL=main.min.js.map
